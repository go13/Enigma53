{% from "messaging.html" import render_errors %}

{% extends "base.html" %}

{% block content %}
<script type="text/javascript" src="/static/steal/steal.js?quizpage/quizlistpage.js"></script>

<div class="container quiz-list-container" style="width: 800px;">
    <div style="height: 50px;" class="page-message"></div>
		
	<a data-toggle="modal" class="btn btn-success pull-right" 
		data-target="#createModal"><div class="icon-plus icon-white"></div> Create
	</a>
		
	<div id="createModal" class="modal hide" tabindex="-1" role="dialog" 
                            aria-labelledby="createModalLabel" aria-hidden="true">
                            
		<form method="POST" action="{{ url_for('quiz_bp.quiz_list')}}" accept-charset="UTF-8">
			<fieldset>         
		        <div class="modal-header">
		            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
		            <h3 id="createModalLabel">Create a Quiz</h3>
		        </div>
		        {{ render_errors(form) }}
        
		       	<div class="modal-body">		    		    
					{% include 'quiz_create.html' %}
		        </div>
		        <div class="modal-footer">
		            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
		            <button type="submit" name="submit" value="Login" class="btn btn-primary">Create</button>
		        </div>		
	        </fieldset>
		</form>
    </div>
    
   {% if form.errors %} 
	  <script type="text/javascript">
	  $('#createModal').modal('show');
	  </script> 
   {% endif %}
	      
    <table class="table table-striped">
        <thead>
        <tr>
            <th class="span1"></th>
            <th class="span1"></th>
            <th class="span5"></th>
            <th class="span7"></th>
        </tr>
        </thead>
        <tbody class="quiz-list-table">	        	
        {%for item in quizes %}
            <tr name="quiz{{item.id}}" class="quizpage_quiz_listitem">
            	<td>
            		<a href="/quiz/{{item.id}}/home/" class="btn btn-link">Home</a>
                </td>
                <td>
                	<a href="/quiz/{{item.id}}/map/" class="btn btn-primary">Start</a>
                </td>
                <td>
                	{{item.title}}
                </td>                
                <td>
                	<a href="/quiz/{{item.id}}/map/edit/" class="btn btn-link pull-right">Edit</a>
                    <button class="btn btn-link quiz-list-item-delete pull-right" type="button">Delete</button>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock content %}